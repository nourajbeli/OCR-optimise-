<!DOCTYPE html>

<html lang="fr">

<head>

  <meta charset="UTF-8">

  <title>Questionner un document avec Gemini</title>

  <style>

    body {

      font-family: Arial, sans-serif;

      background: #f4f6f9;

      display: flex;

      flex-direction: column;

      align-items: center;

      padding: 30px;

    }

    h1 {

      color: #333;

    }

    input, button {

      padding: 10px;

      margin: 10px;

      border-radius: 5px;

      border: 1px solid #ccc;

    }

    button {

      background-color: #4CAF50;

      color: white;

      cursor: pointer;

    }

    button:hover {

      background-color: #45a049;

    }

    #response {

      margin-top: 20px;

      padding: 15px;

      background: white;

      border-radius: 8px;

      max-width: 500px;

      min-height: 100px;

      box-shadow: 0 2px 8px rgba(0,0,0,0.1);

      white-space: pre-wrap;

    }

  </style>

</head>

<body>

  <h1>Uploader un document et poser des questions</h1>

  

  <input type="file" id="fileInput" accept=".pdf,.txt,.docx"><br>

  <input type="text" id="question" placeholder="Pose ta question...">

  <button id="askBtn">Poser la question</button>

  

  <div id="response"></div>

  <script>

    let documentText = "";

    document.getElementById("fileInput").addEventListener("change", async (event) => {

      const file = event.target.files[0];

      if (!file) return;

      if (file.type === "application/pdf") {

        documentText = "Ici on mettra le texte extrait du PDF (avec pdf.js)";

      } else {

        documentText = await file.text();

      }

      alert("Document chargé !");

    });

    document.getElementById("askBtn").addEventListener("click", async () => {

      const question = document.getElementById("question").value;

      if (!documentText) {

        alert("Veuillez d'abord charger un document.");

        return;

      }

      const responseDiv = document.getElementById("response");

      responseDiv.innerHTML = "Chargement...";

      // Exemple d'appel API (clé à mettre)

      const resp = await fetch("https://api.gemini.google.com/v1/chat", {

        method: "POST",

        headers: {

          "Authorization": "Bearer gen-lang-client-0267936914",

          "Content-Type": "application/json"

        },

        body: JSON.stringify({

          model: "gemini-1.5-flash",

          messages: [

            { role: "system", content: "Tu es un assistant qui répond sur base du document fourni." },

            { role: "user", content: "Document : " + documentText },

            { role: "user", content: "Question : " + question }

          ]

        })

      });

      const data = await resp.json();

      responseDiv.innerHTML = data.candidates[0].content[0].text;

    });

  </script>

</body>

</html>
